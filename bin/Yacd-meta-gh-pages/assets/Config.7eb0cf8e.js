import{r as O,b as c,j as t,i as p,s as M,R as X,c as Y,k as Z,l as D,n as F,o as ee,h as W,d as V,q as te,g as A,t as ne,v as oe,w as C,x as re,y as ae,z as se,A as le,D as ie,u as ce,C as de,E as x,F as ue,B as b,G as pe,H as he,J as fe}from"./index.592f120b.js";import{r as ge}from"./logs.dc551e37.js";import{S as y}from"./Select.664f65b0.js";import{R as ve}from"./rotate-cw.192a25c4.js";function me(e,s){if(e==null)return{};var a=be(e,s),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(s.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(a[r]=e[r]))}return a}function be(e,s){if(e==null)return{};var a={},r=Object.keys(e),n,o;for(o=0;o<r.length;o++)n=r[o],!(s.indexOf(n)>=0)&&(a[n]=e[n]);return a}var S=O.exports.forwardRef(function(e,s){var a=e.color,r=a===void 0?"currentColor":a,n=e.size,o=n===void 0?24:n,d=me(e,["color","size"]);return c("svg",{ref:s,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...d,children:[t("polyline",{points:"8 17 12 21 16 17"}),t("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),t("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"})]})});S.propTypes={color:p.exports.string,size:p.exports.oneOfType([p.exports.string,p.exports.number])};S.displayName="DownloadCloud";const ye=S;function ke(e,s){if(e==null)return{};var a=we(e,s),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(s.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(a[r]=e[r]))}return a}function we(e,s){if(e==null)return{};var a={},r=Object.keys(e),n,o;for(o=0;o<r.length;o++)n=r[o],!(s.indexOf(n)>=0)&&(a[n]=e[n]);return a}var N=O.exports.forwardRef(function(e,s){var a=e.color,r=a===void 0?"currentColor":a,n=e.size,o=n===void 0?24:n,d=ke(e,["color","size"]);return c("svg",{ref:s,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...d,children:[t("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),t("polyline",{points:"16 17 21 12 16 7"}),t("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})});N.propTypes={color:p.exports.string,size:p.exports.oneOfType([p.exports.string,p.exports.number])};N.displayName="LogOut";const Ce=N;function xe(e,s){if(e==null)return{};var a=_e(e,s),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(s.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(a[r]=e[r]))}return a}function _e(e,s){if(e==null)return{};var a={},r=Object.keys(e),n,o;for(o=0;o<r.length;o++)n=r[o],!(s.indexOf(n)>=0)&&(a[n]=e[n]);return a}var j=O.exports.forwardRef(function(e,s){var a=e.color,r=a===void 0?"currentColor":a,n=e.size,o=n===void 0?24:n,d=xe(e,["color","size"]);return c("svg",{ref:s,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...d,children:[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),t("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),t("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})});j.propTypes={color:p.exports.string,size:p.exports.oneOfType([p.exports.string,p.exports.number])};j.displayName="Trash2";const Oe=j,{useState:Se,useRef:Ne,useEffect:je,useCallback:Pe}=X;function Ie(e){return t("input",{className:M.input,...e})}function ze({value:e,...s}){const[a,r]=Se(e),n=Ne(e);je(()=>{n.current!==e&&r(e),n.current=e},[e]);const o=Pe(d=>r(d.target.value),[r]);return t("input",{className:M.input,value:a,onChange:o,...s})}const Le="_root_9juo6_1",$e="_section_9juo6_2",Te="_wrapSwitch_9juo6_27",Re="_sep_9juo6_33",Ee="_label_9juo6_46",i={root:Le,section:$e,wrapSwitch:Te,sep:Re,label:Ee},De="_fieldset_olb4q_1",Fe="_input_olb4q_10",Me="_cnt_olb4q_10",_={fieldset:De,input:Fe,cnt:Me};function We({OptionComponent:e,optionPropsList:s,selectedIndex:a,onChange:r}){const n=Y("visually-hidden",_.input),o=d=>{r(d.target.value)};return t("fieldset",{className:_.fieldset,children:s.map((d,m)=>c("label",{children:[t("input",{type:"radio",checked:a===m,name:"selection",value:m,"aria-labelledby":"traffic chart type "+m,onChange:o,className:n}),t("div",{className:_.cnt,children:t(e,{...d})})]},m))})}const{useMemo:Ve}=W,Ae={plugins:{legend:{display:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1,type:"linear"}}},B=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],Be=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],Ue=B;function Ge({id:e}){const s=Z.read(),a=Ve(()=>({labels:Ue,datasets:[{...D,...F[e].up,data:B},{...D,...F[e].down,data:Be}]}),[e]),r="chart-"+e;return ee(s.Chart,r,a,null,Ae),t("div",{style:{width:80,padding:5},children:t("canvas",{id:r})})}const{useEffect:U,useState:He,useCallback:g,useRef:qe}=W,Je=[{id:0},{id:1},{id:2},{id:3}],Qe=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],Ke=[{key:"port",label:"Http Port"},{key:"socks-port",label:"Socks5 Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"mitm-port",label:"MITM Port"}],Xe=[["zh","\u4E2D\u6587"],["en","English"]],Ye=[["direct","Direct"],["rule","Rule"],["script","Script"],["global","Global"]],Ze=[["gvisor","gVisor"],["system","System"]],et=e=>({configs:te(e),apiConfig:A(e)}),tt=e=>({selectedChartStyleIndex:he(e),latencyTestUrl:fe(e),apiConfig:A(e)}),nt=V(tt)(rt),ct=V(et)(ot);function ot({dispatch:e,configs:s,apiConfig:a}){return U(()=>{e(ne(a))},[e,a]),t(nt,{configs:s})}function rt({dispatch:e,configs:s,selectedChartStyleIndex:a,latencyTestUrl:r,apiConfig:n}){var T,R;const[o,d]=He(s),m=qe(s);U(()=>{m.current!==s&&d(s),m.current=s},[s]);const G=g(()=>{e(oe("apiConfig"))},[e]),k=g((l,u)=>{d({...o,[l]:u})},[o]),P=g((l,u)=>{const f={...o.tun,[l]:u};d({...o,tun:{...f}})},[o]),v=g(({name:l,value:u})=>{switch(l){case"mode":case"log-level":case"allow-lan":case"sniffing":k(l,u),e(C(n,{[l]:u})),l==="log-level"&&ge({...n,logLevel:u});break;case"mitm-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(u!==""){const f=parseInt(u,10);if(f<0||f>65535)return}k(l,u);break;case"enable":case"stack":P(l,u),e(C(n,{tun:{[l]:u}}));break;default:return}},[n,e,k,P]),H=g(l=>v(l.target),[v]),{selectChartStyleIndex:q,updateAppConfig:I}=re(),z=g(l=>{const u=l.target,{name:f,value:E}=u;switch(f){case"port":case"socks-port":case"mixed-port":case"redir-port":case"mitm-port":{const w=parseInt(E,10);if(w<0||w>65535)return;e(C(n,{[f]:w}));break}case"latencyTestUrl":{I(f,E);break}default:throw new Error(`unknown input name ${f}`)}},[n,e,I]),J=g(()=>{e(ae(n))},[n,e]),Q=g(()=>{e(se(n))},[n,e]),K=g(()=>{e(le(n))},[n,e]),{data:L}=ie(["/version",n],()=>pe("/version",n)),{t:h,i18n:$}=ce();return c("div",{children:[t(de,{title:h("Config")}),c("div",{className:i.root,children:[Ke.map(l=>o[l.key]!==void 0?c("div",{children:[t("div",{className:i.label,children:l.label}),t(Ie,{name:l.key,value:o[l.key],onChange:H,onBlur:z})]},l.key):null),c("div",{children:[t("div",{className:i.label,children:"Mode"}),t(y,{options:Ye,selected:o.mode,onChange:l=>v({name:"mode",value:l.target.value})})]}),c("div",{children:[t("div",{className:i.label,children:"Log Level"}),t(y,{options:Qe,selected:o["log-level"],onChange:l=>v({name:"log-level",value:l.target.value})})]}),c("div",{children:[t("div",{className:i.label,children:h("allow_lan")}),t("div",{className:i.wrapSwitch,children:t(x,{name:"allow-lan",checked:o["allow-lan"],onChange:l=>v({name:"allow-lan",value:l})})})]}),L.meta&&c("div",{children:[t("div",{className:i.label,children:h("tls_sniffing")}),t("div",{className:i.wrapSwitch,children:t(x,{name:"sniffing",checked:o.sniffing,onChange:l=>v({name:"sniffing",value:l})})})]})]}),t("div",{className:i.sep,children:t("div",{})}),L.meta&&c(ue,{children:[c("div",{className:i.section,children:[c("div",{children:[t("div",{className:i.label,children:h("enable_tun_device")}),t("div",{className:i.wrapSwitch,children:t(x,{checked:(T=o.tun)==null?void 0:T.enable,onChange:l=>v({name:"enable",value:l})})})]}),c("div",{children:[t("div",{className:i.label,children:"TUN IP Stack"}),t(y,{options:Ze,selected:(R=o.tun)==null?void 0:R.stack,onChange:l=>v({name:"stack",value:l.target.value})})]})]}),t("div",{className:i.sep,children:t("div",{})}),c("div",{className:i.section,children:[c("div",{children:[t("div",{className:i.label,children:"Reload"}),t(b,{start:t(ve,{size:16}),label:h("reload_config_file"),onClick:J})]}),c("div",{children:[t("div",{className:i.label,children:"GEO Databases"}),t(b,{start:t(ye,{size:16}),label:h("update_geo_databases_file"),onClick:Q})]}),c("div",{children:[t("div",{className:i.label,children:"FakeIP"}),t(b,{start:t(Oe,{size:16}),label:h("flush_fake_ip_pool"),onClick:K})]})]}),t("div",{className:i.sep,children:t("div",{})})]}),c("div",{className:i.section,children:[c("div",{children:[t("div",{className:i.label,children:h("latency_test_url")}),t(ze,{name:"latencyTestUrl",type:"text",value:r,onBlur:z})]}),c("div",{children:[t("div",{className:i.label,children:h("lang")}),t("div",{children:t(y,{options:Xe,selected:$.language,onChange:l=>$.changeLanguage(l.target.value)})})]}),c("div",{children:[t("div",{className:i.label,children:h("chart_style")}),t(We,{OptionComponent:Ge,optionPropsList:Je,selectedIndex:a,onChange:q})]}),c("div",{children:[t("div",{className:i.label,children:"Action"}),t(b,{start:t(Ce,{size:16}),label:"Switch backend",onClick:G})]})]})]})}export{ct as default};
